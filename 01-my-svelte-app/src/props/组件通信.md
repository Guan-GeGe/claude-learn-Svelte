## ğŸ¤– Assistant

```markdown
# Svelte 5 ç»„ä»¶é€šä¿¡é€ŸæŸ¥è¡¨

## ç›®å½•
- [Props æ¥æ”¶](#props-æ¥æ”¶)
- [äº‹ä»¶å¤„ç†](#äº‹ä»¶å¤„ç†)
- [åŒå‘ç»‘å®š](#åŒå‘ç»‘å®š)
- [æ’æ§½](#æ’æ§½)
- [ç»„ä»¶å¼•ç”¨](#ç»„ä»¶å¼•ç”¨)
- [Context API](#context-api)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

---

## Props æ¥æ”¶

### `$props()` åŸºæœ¬ç”¨æ³•

```svelte
<script>
  // åŸºæœ¬æ¥æ”¶
  let { name, age } = $props();
  
  // é»˜è®¤å€¼
  let { count = 0, enabled = true } = $props();
  
  // é‡å‘½å
  let { name: userName, id: userId } = $props();
  
  // å‰©ä½™å±æ€§
  let { title, ...rest } = $props();
</script>
```

### TypeScript ç±»å‹

```svelte
<script lang="ts">
  interface Props {
    name: string;
    age?: number;
    onClick?: () => void;
  }
  
  let { name, age = 0, onClick }: Props = $props();
</script>
```

### å…³é”®ç‚¹
- Props è‡ªåŠ¨å“åº”å¼ï¼Œæ— éœ€é¢å¤–å¤„ç†
- Props ä¸å¯ç›´æ¥ä¿®æ”¹ï¼Œé€šè¿‡å›è°ƒé€šçŸ¥çˆ¶ç»„ä»¶
- ä½¿ç”¨è§£æ„è¯­æ³•æ¥æ”¶ props

---

## äº‹ä»¶å¤„ç†

### å›è°ƒå‡½æ•°æ–¹å¼

```svelte
<!-- å­ç»„ä»¶ -->
<script>
  let { onclick, label } = $props();
</script>

<button onclick={onclick}>{label}</button>
```

```svelte
<!-- çˆ¶ç»„ä»¶ -->
<script>
  function handleClick() {
    console.log('clicked');
  }
</script>

<Button onclick={handleClick} label="ç‚¹å‡»" />
```

### ä¼ é€’å‚æ•°

```svelte
<!-- å­ç»„ä»¶ -->
<script>
  let { item, onDelete } = $props();
</script>

<button onclick={() => onDelete(item.id)}>åˆ é™¤</button>
```

```svelte
<!-- çˆ¶ç»„ä»¶ -->
<script>
  function deleteItem(id) {
    items = items.filter(i => i.id !== id);
  }
</script>

<Item {item} onDelete={deleteItem} />
```

### å‘½åçº¦å®š
- å›è°ƒå‡½æ•°ä»¥ `on` å¼€å¤´ï¼š`onClick`, `onSubmit`, `onDelete`
- å¯é€‰å›è°ƒä½¿ç”¨ `?.()` è°ƒç”¨ï¼š`onClick?.()`

---

## åŒå‘ç»‘å®š

### `$bindable()` å£°æ˜

```svelte
<!-- å­ç»„ä»¶ -->
<script>
  let { value = $bindable('') } = $props();
</script>

<input bind:value />
```

```svelte
<!-- çˆ¶ç»„ä»¶ -->
<script>
  let text = $state('');
</script>

<Input bind:value={text} />
<p>{text}</p>
```

### ä½¿ç”¨åœºæ™¯
- è¡¨å•è¾“å…¥ç»„ä»¶
- æ»‘å—ã€å¼€å…³ç­‰äº¤äº’ç»„ä»¶
- éœ€è¦çˆ¶å­ç»„ä»¶åŒæ­¥çŠ¶æ€æ—¶

### æ³¨æ„äº‹é¡¹
- åªæœ‰å£°æ˜ä¸º `$bindable()` çš„ props æ‰èƒ½ç»‘å®š
- ç»‘å®šä¼šåˆ›å»ºåŒå‘æ•°æ®æµï¼Œè°¨æ…ä½¿ç”¨

---

## æ’æ§½

### é»˜è®¤æ’æ§½

```svelte
<!-- å­ç»„ä»¶ -->
<div class="card">
  <slot />
</div>
```

```svelte
<!-- çˆ¶ç»„ä»¶ -->
<Card>
  <p>å†…å®¹</p>
</Card>
```

### å‘½åæ’æ§½

```svelte
<!-- å­ç»„ä»¶ -->
<header>
  <slot name="header" />
</header>
<main>
  <slot />
</main>
<footer>
  <slot name="footer" />
</footer>
```

```svelte
<!-- çˆ¶ç»„ä»¶ -->
<Layout>
  <svelte:fragment slot="header">
    <h1>æ ‡é¢˜</h1>
  </svelte:fragment>
  
  <p>ä¸»å†…å®¹</p>
  
  <svelte:fragment slot="footer">
    <p>é¡µè„š</p>
  </svelte:fragment>
</Layout>
```

### ä½œç”¨åŸŸæ’æ§½

```svelte
<!-- å­ç»„ä»¶ -->
<script>
  let { items } = $props();
</script>

<ul>
  {#each items as item}
    <li>
      <slot {item} />
    </li>
  {/each}
</ul>
```

```svelte
<!-- çˆ¶ç»„ä»¶ -->
<List {items}>
  {#snippet children({ item })}
    <strong>{item.name}</strong>
  {/snippet}
</List>
```

### `{#snippet}` è¯­æ³•

```svelte
<!-- å­ç»„ä»¶ -->
<table>
  {#each data as row}
    <tr>
      <slot name="cell" {row} />
    </tr>
  {/each}
</table>
```

```svelte
<!-- çˆ¶ç»„ä»¶ -->
<Table {data}>
  {#snippet cell({ row })}
    <td>{row.name}</td>
  {/snippet}
</Table>
```

---

## ç»„ä»¶å¼•ç”¨

### `bind:this` ç”¨æ³•

```svelte
<!-- å­ç»„ä»¶ -->
<script>
  let visible = $state(false);
  
  export function open() {
    visible = true;
  }
  
  export function close() {
    visible = false;
  }
</script>

{#if visible}
  <div class="modal">
    <slot />
  </div>
{/if}
```

```svelte
<!-- çˆ¶ç»„ä»¶ -->
<script>
  let modal;
</script>

<button onclick={() => modal.open()}>æ‰“å¼€</button>

<Modal bind:this={modal}>
  <p>å†…å®¹</p>
</Modal>
```

### ä½¿ç”¨åœºæ™¯
- è°ƒç”¨å­ç»„ä»¶æ–¹æ³•
- è®¿é—®å­ç»„ä»¶çŠ¶æ€
- æ§åˆ¶å­ç»„ä»¶è¡Œä¸ºï¼ˆå¦‚å¼¹çª—ã€æŠ½å±‰ï¼‰

---

## Context API

### åŸºæœ¬ç”¨æ³•

```svelte
<!-- Provider ç»„ä»¶ -->
<script>
  import { setContext } from 'svelte';
  
  let theme = $state('light');
  
  setContext('theme', {
    get current() {
      return theme;
    },
    toggle() {
      theme = theme === 'light' ? 'dark' : 'light';
    }
  });
</script>

<slot />
```

```svelte
<!-- Consumer ç»„ä»¶ -->
<script>
  import { getContext } from 'svelte';
  
  const theme = getContext('theme');
</script>

<button onclick={() => theme.toggle()}>
  {theme.current}
</button>
```

### ä½¿ç”¨åœºæ™¯
- è·¨å¤šå±‚ç»„ä»¶ä¼ é€’æ•°æ®
- ä¸»é¢˜ã€è¯­è¨€ç­‰å…¨å±€é…ç½®
- è¡¨å•çŠ¶æ€ç®¡ç†
- é¿å… props å±‚å±‚ä¼ é€’

### æ³¨æ„äº‹é¡¹
- Context å¿…é¡»åœ¨ç»„ä»¶åˆå§‹åŒ–æ—¶è®¾ç½®
- ä½¿ç”¨ getter ä¿æŒå“åº”æ€§ï¼š`get current() { return value }`
- Context ä¸èƒ½åœ¨ç»„ä»¶å¤–éƒ¨è®¿é—®

---

## æœ€ä½³å®è·µ

### 1. Props å‘½åè§„èŒƒ

```svelte
<script>
  // æ•°æ® propsï¼šåè¯
  let { user, items, config } = $props();
  
  // å›è°ƒ propsï¼šon + åŠ¨è¯
  let { onClick, onSubmit, onDelete } = $props();
  
  // å¸ƒå°” propsï¼šis/has/can + å½¢å®¹è¯
  let { isOpen, hasError, canEdit } = $props();
</script>
```

### 2. äº‹ä»¶å¤„ç†

```svelte
<script>
  let { onUpdate } = $props();
  
  // âœ… ä½¿ç”¨å¯é€‰é“¾
  function handleChange(value) {
    onUpdate?.(value);
  }
  
  // âœ… æä¾›é»˜è®¤è¡Œä¸º
  function handleClick() {
    onUpdate?.() ?? console.log('é»˜è®¤è¡Œä¸º');
  }
</script>
```

### 3. åŒå‘ç»‘å®š vs å›è°ƒ

```svelte
<!-- ç®€å•å€¼ï¼šä½¿ç”¨åŒå‘ç»‘å®š -->
<script>
  let { value = $bindable('') } = $props();
</script>
<input bind:value />

<!-- å¤æ‚é€»è¾‘ï¼šä½¿ç”¨å›è°ƒ -->
<script>
  let { value, onUpdate } = $props();
  
  function handleChange(e) {
    const newValue = e.target.value;
    // éªŒè¯ã€æ ¼å¼åŒ–ç­‰
    if (newValue.length <= 10) {
      onUpdate(newValue);
    }
  }
</script>
<input value={value} oninput={handleChange} />
```

### 4. æ’æ§½é»˜è®¤å†…å®¹

```svelte
<div class="card">
  <slot name="header">
    <h2>é»˜è®¤æ ‡é¢˜</h2>
  </slot>
  
  <slot>
    <p>é»˜è®¤å†…å®¹</p>
  </slot>
</div>
```

### 5. Context å“åº”å¼

```svelte
<script>
  import { setContext } from 'svelte';
  
  let data = $state({ count: 0 });
  
  // âœ… ä½¿ç”¨ getter ä¿æŒå“åº”æ€§
  setContext('store', {
    get data() {
      return data;
    },
    update(newData) {
      data = newData;
    }
  });
  
  // âŒ ç›´æ¥ä¼ é€’ä¼šå¤±å»å“åº”æ€§
  // setContext('store', data);
</script>
```

### 6. ç»„ä»¶èŒè´£åˆ†ç¦»

```svelte
<!-- âœ… å±•ç¤ºç»„ä»¶ï¼šåªæ¥æ”¶ props -->
<script>
  let { user, onEdit } = $props();
</script>
<div>
  <p>{user.name}</p>
  <button onclick={() => onEdit(user.id)}>ç¼–è¾‘</button>
</div>

<!-- âœ… å®¹å™¨ç»„ä»¶ï¼šç®¡ç†çŠ¶æ€ -->
<script>
  let users = $state([]);
  
  function editUser(id) {
    // ä¸šåŠ¡é€»è¾‘
  }
</script>
{#each users as user}
  <UserCard {user} onEdit={editUser} />
{/each}
```

---

## å¿«é€Ÿå‚è€ƒ

| åŠŸèƒ½ | è¯­æ³• | ä½¿ç”¨åœºæ™¯ |
|------|------|----------|
| æ¥æ”¶ Props | `let { name } = $props()` | æ‰€æœ‰ç»„ä»¶é€šä¿¡ |
| é»˜è®¤å€¼ | `let { count = 0 } = $props()` | å¯é€‰ props |
| äº‹ä»¶å›è°ƒ | `let { onClick } = $props()` | å­ä¼ çˆ¶ |
| åŒå‘ç»‘å®š | `let { value = $bindable() } = $props()` | è¡¨å•ç»„ä»¶ |
| é»˜è®¤æ’æ§½ | `<slot />` | å†…å®¹åˆ†å‘ |
| å‘½åæ’æ§½ | `<slot name="header" />` | å¤šåŒºåŸŸå†…å®¹ |
| ä½œç”¨åŸŸæ’æ§½ | `<slot {item} />` | è‡ªå®šä¹‰æ¸²æŸ“ |
| ç»„ä»¶å¼•ç”¨ | `bind:this={ref}` | è°ƒç”¨å­ç»„ä»¶æ–¹æ³• |
| Context | `setContext()` / `getContext()` | è·¨å±‚çº§é€šä¿¡ |

---

## å¸¸è§æ¨¡å¼

### è¡¨å•ç»„ä»¶

```svelte
<script>
  let { 
    value = $bindable(''),
    label,
    error,
    required = false 
  } = $props();
</script>

<div>
  <label>
    {label}
    {#if required}<span>*</span>{/if}
  </label>
  <input bind:value />
  {#if error}
    <span class="error">{error}</span>
  {/if}
</div>
```

### åˆ—è¡¨ç»„ä»¶

```svelte
<script>
  let { 
    items,
    onItemClick,
    onItemDelete 
  } = $props();
</script>

{#each items as item (item.id)}
  <div>
    <span onclick={() => onItemClick(item)}>
      {item.name}
    </span>
    <button onclick={() => onItemDelete(item.id)}>
      åˆ é™¤
    </button>
  </div>
{/each}
```

### å¼¹çª—ç»„ä»¶

```svelte
<script>
  let { 
    title,
    onConfirm,
    onCancel 
  } = $props();
  
  let visible = $state(false);
  
  export function open() {
    visible = true;
  }
  
  export function close() {
    visible = false;
  }
</script>

{#if visible}
  <div class="modal">
    <h2>{title}</h2>
    <slot />
    <button onclick={() => { onConfirm?.(); close(); }}>
      ç¡®è®¤
    </button>
    <button onclick={() => { onCancel?.(); close(); }}>
      å–æ¶ˆ
    </button>
  </div>
{/if}
```

---

## è°ƒè¯•æŠ€å·§

### 1. æ£€æŸ¥ Props

```svelte
<script>
  let props = $props();
  
  $effect(() => {
    console.log('Props:', props);
  });
</script>
```

### 2. è¿½è¸ªå›è°ƒè°ƒç”¨

```svelte
<script>
  let { onClick } = $props();
  
  function handleClick() {
    console.log('Button clicked');
    onClick?.();
  }
</script>
```

### 3. éªŒè¯ Context

```svelte
<script>
  import { getContext, hasContext } from 'svelte';
  
  if (!hasContext('theme')) {
    console.warn('Theme context not found');
  }
  
  const theme = getContext('theme');
</script>
```

---

## è®°å¿†è¦ç‚¹

- **Props**ï¼šç”¨ `$props()` æ¥æ”¶ï¼Œä¸å¯ä¿®æ”¹
- **Events**ï¼šç”¨å›è°ƒå‡½æ•°ï¼Œä¸ç”¨ dispatcher
- **Binding**ï¼šç”¨ `$bindable()` å£°æ˜å¯ç»‘å®š
- **Slots**ï¼šç”¨ `{#snippet}` å®ç°ä½œç”¨åŸŸæ’æ§½
- **Ref**ï¼šç”¨ `bind:this` è·å–ç»„ä»¶å®ä¾‹
- **Context**ï¼šç”¨ getter ä¿æŒå“åº”æ€§

---

## æ€»ç»“

Svelte 5 ç»„ä»¶é€šä¿¡çš„æ ¸å¿ƒå˜åŒ–ï¼š

1. **Props æ¥æ”¶**ï¼š`$props()` æ›¿ä»£ `export let`
2. **äº‹ä»¶å¤„ç†**ï¼šå›è°ƒå‡½æ•°æ›¿ä»£ `createEventDispatcher`
3. **åŒå‘ç»‘å®š**ï¼š`$bindable()` å£°æ˜å¯ç»‘å®š props
4. **æ’æ§½å¢å¼º**ï¼š`{#snippet}` æä¾›æ›´å¼ºå¤§çš„æ’æ§½åŠŸèƒ½
5. **Context å“åº”å¼**ï¼šä½¿ç”¨ getter ä¿æŒå“åº”æ€§

æŒæ¡è¿™äº›æ¨¡å¼ï¼Œä½ å°±èƒ½é«˜æ•ˆåœ°è¿›è¡Œç»„ä»¶é€šä¿¡ã€‚
```
